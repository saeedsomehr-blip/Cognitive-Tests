<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <style>
    body.app-loading { visibility: hidden; }
    body.app-loading #app { opacity: 0; }
  </style>
  <title data-i18n="prm.title">حافظه تشخیص الگو (PRM)</title>
  <link rel="stylesheet" href="../assets/css/base.css">
  <style>
    #instructions-screen {
      margin-top: 16px;
      text-align: right;
      line-height: 1.8;
      font-size: 14px;
      background: #202020;
      border-radius: 12px;
      padding: 16px;
    }

    #instructions-screen h2 {
      margin-top: 0;
      margin-bottom: 8px;
      text-align: center;
    }

    #instruction-sample {
      margin: 12px auto;
      display: flex;
      justify-content: center;
    }

    #menu-screen {
      margin: 24px auto;
      padding: 24px;
      max-width: 500px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.04);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
      text-align: center;
    }

    .menu-hint {
      margin-bottom: 20px;
      font-size: 14px;
      color: var(--muted);
    }

    .menu-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .menu-actions button {
      font-size: 18px;
      min-width: 140px;
      padding: 12px 22px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, #1e88e5, #42a5f5);
      color: #fff;
      font-weight: 700;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
      transition: transform 0.2s ease, opacity 0.2s ease;
      letter-spacing: 0.4px;
    }

    .menu-actions button.task-btn-secondary {
      background: linear-gradient(135deg, #43a047, #66bb6a);
    }

    .menu-actions button.task-btn-primary {
      background: linear-gradient(135deg, #e53935, #ef5350);
    }

    .menu-actions button:hover {
      transform: translateY(-2px);
      opacity: 0.95;
    }

    .instruction-actions {
      margin-top: 18px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
  </style>
</head>

<body class="app-loading">
  <div id="app">
    <button id="back-btn" class="back-btn" type="button" data-i18n="common.back">Back</button>
    <h1 data-i18n="prm.title">Pattern Recognition Memory (PRM)</h1>

    <div id="status"></div>
    <div id="phase-label"></div>

    <div id="menu-screen">
      <p class="menu-hint" data-i18n="prm.menuHint">Choose an option to begin.</p>
      <div class="menu-actions">
        <button id="menu-instructions-btn" class="task-btn" data-i18n="prm.menuInstructions">Show instructions</button>
        <button id="menu-practice-btn" class="task-btn task-btn-secondary" data-i18n="prm.menuPractice">Practice</button>
        <button id="menu-start-btn" class="task-btn task-btn-primary" data-i18n="prm.menuStart">Start main test</button>
      </div>
    </div>

    <div id="controls"></div>

    <div id="instructions-screen" class="hidden">
      <h2 data-i18n="prm.instructionsTitle">PRM instructions</h2>

      <p data-i18n="prm.instructions1">
        In the study phase you will see several patterns; remember them.
      </p>

      <p data-i18n="prm.instructions2">
        In the test phase a pair appears; one was seen before. Choose the previously seen one.
      </p>

      <p data-i18n="prm.instructions3">
        A sample preview pattern is shown below.
      </p>

      <div id="instruction-sample"></div>

      <div class="instruction-actions">
        <button id="instructions-practice-btn" class="task-btn task-btn-secondary" data-i18n="prm.instructionsPracticeBtn">
          Practice
        </button>
        <button id="instructions-start-btn" class="task-btn task-btn-primary" data-i18n="prm.instructionsStartBtn">
          Start main test
        </button>
      </div>
    </div>

    <div id="stimulus-area"></div>
  </div>

  <script src="../assets/js/settings.js"></script>
  <script src="../assets/js/i18n.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="../assets/js/csv_utils.js"></script>
  <script src="../assets/js/prm_csv.js"></script>
  <script src="../assets/js/prm_report.js"></script>
  <script src="prm_library.js"></script>
  <script src="prm_segments.js"></script>
  <script src="prm_patterns.js"></script>
  <script src="prm.js"></script>
</body>
</html>
